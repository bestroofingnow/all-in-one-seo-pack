import{u as $}from"./vue-router.c752d027.js";import{u as C,f as H,b as Y,l as z}from"./index.1916c442.js";import W from"./BadBotBlocker.6468d51e.js";import{C as K}from"./Index.edfde9c3.js";import G from"./DatabaseTools.5c37cc24.js";import{B as N}from"./Checkbox.7f29e7aa.js";import"./translations.8804e7f4.js";import{_ as y}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as A,s as k}from"./default-i18n.20001971.js";import{v as a,o as n,c as l,F as S,N as M,G as g,l as u,H as w,t as m,a as p,k as b,b as D,u as L,q as O,J as P,f as V}from"./runtime-dom.esm-bundler.d8cc9f6e.js";import{C as F,S as q}from"./Caret.f0cd5451.js";import{C as j}from"./Card.5e470f9f.js";import{C as J}from"./Tabs.59bea834.js";import{C as Q}from"./Index.3671614f.js";import{C as X}from"./Upload.ccfecaa0.js";import{C as Z}from"./SettingsRow.8bf4d07f.js";import{G as ee,a as te}from"./Row.b818ec8c.js";import{D as oe}from"./datetime.f197aeae.js";import{u as E}from"./ToolsStore.e9e4c210.js";import se from"./HtaccessEditor.eb21c96c.js";import ne from"./ImportExport.80364b83.js";import ie from"./RobotsEditor.87eabc17.js";import re from"./SystemStatus.5ab5073c.js";import ae from"./WpCode.3ab2c817.js";import{u as le}from"./RobotsTxt.8d3a3afe.js";import"./helpers.86fc376f.js";import"./Textarea.3f15b85b.js";import"./Tooltip.ec56da3f.js";import"./index.ea8ba50f.js";import"./Slide.f54bc05f.js";import"./license.902e841d.js";import"./upperFirst.6d3e3475.js";import"./_stringToArray.f9ddb970.js";import"./toString.a4cd37ed.js";import"./allowed.844c3efc.js";/* empty css             */import"./params.af7ed354.js";import"./Header.227b713e.js";import"./addons.b6e57b98.js";import"./LicenseKeyBar.4a3bdbc5.js";import"./ScrollTo.81bea8a7.js";import"./LogoGear.f5a6299c.js";import"./AnimatedNumber.60a31462.js";import"./numbers.9fc174f3.js";import"./Logo.81798919.js";import"./Support.5941a899.js";import"./date.1957f3e6.js";import"./constants.e65116f2.js";import"./Url.95ecd0e5.js";import"./Exclamation.718fb4f0.js";import"./Gear.47905bcb.js";import"./Network.e79ef49b.js";import"./ToolsSettings.5005d6eb.js";import"./Checkmark.d3c19fa2.js";import"./Blur.400f058f.js";import"./Index.daad859b.js";import"./RequiredPlans.67e702d8.js";import"./ProBadge.2a112d33.js";import"./Information.7ecdbebc.js";import"./Editor.cccb0234.js";import"./isEqual.999c4de1.js";import"./_baseIsEqual.379ab588.js";import"./_getTag.575e77df.js";import"./_baseClone.a197b328.js";import"./_arrayEach.6af5abac.js";import"./Plus.d5c7813d.js";import"./History.8a474009.js";import"./Refresh.2f5e855c.js";import"./Radio.72a10a04.js";import"./Download.c15a249a.js";import"./regex.8a6101c0.js";import"./vuedraggable.umd.abcf4bb0.js";import"./UnwantedBots.c53916dc.js";import"./RadioToggle.13820a42.js";import"./Ellipse.99d3728a.js";import"./External.55b17655.js";import"./Row.3c1927a6.js";const R=void 0,ce={emits:["update"],setup(){return{rootStore:C(),addonsStore:H()}},components:{BaseCheckbox:N},props:{loading:Boolean,disabled:Boolean},data(){return{selectedAddons:{},strings:{runAction:A("Run Action",R),noAddons:A("There are no active addons at the moment.",R)}}},computed:{activeAddons(){return this.addonsStore.addons.filter(t=>t.isActive)},selectedSkus(){return Object.keys(this.selectedAddons).filter(t=>this.selectedAddons[t])}}},de={class:"aioseo-addons-list"},ue={key:1};function pe(t,o,s,c,e,r){const d=a("base-checkbox"),_=a("base-button");return n(),l("div",de,[r.activeAddons.length>0?(n(),l(S,{key:0},[(n(!0),l(S,null,M(r.activeAddons,(h,v)=>(n(),l("div",{key:v},[g(d,{size:"medium",modelValue:e.selectedAddons[h.sku],"onUpdate:modelValue":f=>e.selectedAddons[h.sku]=f,disabled:s.disabled},{default:u(()=>[w(m(h.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128)),p("div",null,[g(_,{type:"blue",size:"medium",onClick:o[0]||(o[0]=h=>t.$emit("update",r.selectedSkus)),loading:s.loading,disabled:s.disabled||r.selectedSkus.length===0},{default:u(()=>[w(m(e.strings.runAction),1)]),_:1},8,["loading","disabled"])])],64)):(n(),l("b",ue,m(e.strings.noAddons),1))])}const me=y(ce,[["render",pe],["__scopeId","data-v-fbb0de3d"]]),ge=void 0,he={emits:["update"],setup(){return{rootStore:C()}},components:{BaseCheckbox:N,GridColumn:ee,GridRow:te},props:{loading:Boolean,disabled:Boolean},data(){return{options:{},strings:{updateOptions:A("Update Options",ge)}}},mounted(){this.rootStore.aioseo.deprecatedOptions.forEach(t=>{t.enabled&&(this.options[t.value]=!0)})}},_e={class:"aioseo-deprecated-options"},be=p("br",null,null,-1),fe=p("br",null,null,-1),Ae=p("br",null,null,-1);function we(t,o,s,c,e,r){const d=a("base-checkbox"),_=a("grid-column"),h=a("grid-row"),v=a("base-button");return n(),l("div",_e,[g(h,{class:"settings"},{default:u(()=>[(n(!0),l(S,null,M(c.rootStore.aioseo.deprecatedOptions,(f,T)=>(n(),b(_,{key:T,xl:"6",sm:"12"},{default:u(()=>[g(d,{size:"medium",modelValue:e.options[f.value],"onUpdate:modelValue":x=>e.options[f.value]=x,disabled:s.disabled},{default:u(()=>[w(m(f.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024))),128))]),_:1}),be,g(v,{type:"blue",size:"medium",onClick:o[0]||(o[0]=f=>t.$emit("update",e.options)),loading:s.loading,disabled:s.disabled},{default:u(()=>[w(m(e.strings.updateOptions),1)]),_:1},8,["loading","disabled"]),fe,Ae])}const ve=y(he,[["render",we]]),ke={setup(){return{optionsStore:Y()}},computed:{infoItems(){return[{label:"Migrated Version",value:this.optionsStore.internalOptions.internal.migratedVersion},{label:"First Activated",value:this.optionsStore.internalOptions.internal.firstActivated!==0?oe.fromMillis(this.optionsStore.internalOptions.internal.firstActivated*1e3).toFormat("MMMM d, yyyy"):!1}]}}},Se={class:"v3-migration-info aioseo-description"},ye={class:"info-items"},De={key:0},Ce={key:1};function Me(t,o,s,c,e,r){return n(),l("div",Se,[p("ul",ye,[(n(!0),l(S,null,M(r.infoItems,(d,_)=>(n(),l("li",{key:_},[d.value?(n(),l("span",De,m(d.label),1)):D("",!0),d.value?(n(),l("span",Ce,m(d.value),1)):D("",!0)]))),128))])])}const Te=y(ke,[["render",Me]]),xe={class:"aioseo-writing-assistant"},Le={__name:"WritingAssistant",setup(t){const o=E(),s=void 0,c={resetLogins:A("Reset SEOBoost Logins",s)};let e=!1;const r=()=>{confirm(A("Are you sure you want to reset SEOBoost logins?",s))&&(e=!0,o.doTask({action:"aioseo-reset-seoboost-logins"}).finally(()=>{alert(A("SEOBoost logins have been reset.",s)),e=!1}))};return(d,_)=>{const h=a("base-button");return n(),l("div",xe,[g(h,{type:"blue",size:"medium",onClick:r,loading:L(e),disabled:L(e)},{default:u(()=>[w(m(c.resetLogins),1)]),_:1},8,["loading","disabled"])])}}},Oe={setup(){return{rootStore:C(),toolsStore:E()}},components:{AddonsList:me,CoreAlert:F,CoreCard:j,CoreMainTabs:J,CoreModal:Q,CoreNetworkSiteSelector:X,CoreSettingsRow:Z,DeprecatedOptions:ve,MigrationInfo:Te,SvgClose:q,WritingAssistant:Le},props:{extraActions:{type:Array,required:!1}},data(){return{site:{},tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",currentData:{},showAreYouSureModal:!1,doingAction:[],strings:{selectSite:"Select Site",cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"},alertLink:z.getPlainLink("Click here to open to the Scheduled Actions panel",this.rootStore.aioseo.urls.admin.scheduledActions,!0)}},computed:{areYouSureTitle(){return`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const t=k('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),o=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network cache.</strong>":"",s=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network plugin updates transient.</strong>":"";return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:`This action deletes all records of the <code>aioseo_cache</code> table in the database.${o}`,longDescription:"",showModal:!1,network:!0},{label:"Clear Plugin Updates Transient",slug:"clear-plugin-updates-transient",shortDescription:`This action clears the plugin updates transient, which forces WordPress Core to check for plugin updates.${s}`,longDescription:"",showModal:!1,network:!0},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:k("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",t),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0},{label:"Rerun Migrations for Active Addons",slug:"rerun-addon-migrations",shortDescription:"This action will rerun all update migrations for the selected addons.",longDescription:"",showModal:!0,component:"addons-list"}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:k("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",t),showModal:!1}]},{slug:"deprecated-options",name:"Deprecated Options",actions:[{label:"Deprecated Options",slug:"deprecated-options",shortDescription:"Enable or disable any options that have been deprecated in AIOSEO.",longDescription:"<strong>These options are not guaranteed to work and all support has been dropped.</strong>",showModal:!1,component:"deprecated-options"}]},{slug:"writing-assistant",name:"Writing Assistant",actions:[{label:"Writing Assistant",slug:"writing-assistant",shortDescription:"Resets all users SEOBoost logins.",longDescription:"",showModal:!1,component:"writing-assistant"}]}]},activeTabObject(){return this.tabs.find(t=>t.slug===this.activeTab)}},methods:{isActionDisabled(t){return this.rootStore.aioseo.data.isNetworkAdmin?this.site.blog_id?this.site.blog_id==="network"&&t.network?!1:this.site.blog_id==="network"&&!t.network:!0:!1},isLoading(t){return!!this.doingAction[t.slug]},getSelectedActionObject(t){let o=null;return this.actions.forEach(s=>{const c=s.options.find(e=>e.value===t);c&&(o=c)}),o},maybeDoAction(t,o){if(this.currentAction=t,this.currentData=o,t.showModal){this.showAreYouSureModal=!0;return}this.doAction(o)},doAction(t){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.toolsStore.doTask({action:this.currentAction.slug,siteId:this.site.blog_id||this.rootStore.aioseo.data.currentBlogId,data:t}).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(o=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,o)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}},beforeMount(){var o;let t=-1;if(this.rootStore.aioseo.data.v3Options&&(t=this.tabs.findIndex(s=>s.slug.toLowerCase()==="migrations"),t!==-1)){const s=k('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions);this.tabs[t].actions.push({label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:k("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",s),infoComponent:"MigrationInfo",showModal:!0})}(o=this.extraActions)!=null&&o.length&&this.extraActions.forEach(s=>{if(t=this.tabs.findIndex(c=>c.slug.toLowerCase()===s.slug.toLowerCase()),t!==-1){this.tabs[t].actions=this.tabs[t].actions.concat(s.actions);return}this.tabs.push(s)})}},Be={class:"aioseo-tools-debug"},Ve={key:0,class:"aioseo-settings-row"},Re={class:"select-site"},Ne=["innerHTML"],Ee=["innerHTML"],Ie=["innerHTML"],Ue={class:"aioseo-modal-body"},$e=["innerHTML"];function He(t,o,s,c,e,r){const d=a("core-network-site-selector"),_=a("core-alert"),h=a("core-main-tabs"),v=a("base-button"),f=a("core-settings-row"),T=a("svg-close"),x=a("core-modal"),I=a("core-card");return n(),l("div",Be,[g(I,{slug:"debug","header-text":e.strings.cardLabel},{default:u(()=>[c.rootStore.aioseo.data.isNetworkAdmin?(n(),l("div",Ve,[p("div",Re,m(e.strings.selectSite),1),g(d,{onSelectedSite:o[0]||(o[0]=i=>e.site=i),"show-network":""})])):D("",!0),g(_,{type:"yellow"},{default:u(()=>[p("div",null,m(e.strings.alertWarning),1),p("div",{innerHTML:e.alertLink},null,8,Ne)]),_:1}),(n(),b(h,{internal:"",key:e.tabsKey,tabs:r.tabs,active:e.activeTab,showSaveButton:!1,onChanged:o[1]||(o[1]=i=>e.activeTab=i)},null,8,["tabs","active"])),(n(!0),l(S,null,M(r.activeTabObject.actions,(i,U)=>(n(),b(f,{key:e.activeTab+U,name:i.label,align:""},{content:u(()=>[i.component?(n(),b(O(i.component),{key:0,onUpdate:B=>r.maybeDoAction(i,B),loading:e.doingAction[i.slug],disabled:r.isActionDisabled(i)},null,40,["onUpdate","loading","disabled"])):(n(),b(v,{type:"blue",size:"medium",onClick:B=>r.maybeDoAction(i),loading:e.doingAction[i.slug],key:e.doingActionKey,disabled:r.isActionDisabled(i)},{default:u(()=>[w(m(e.strings.buttonLabel),1)]),_:2},1032,["onClick","loading","disabled"])),p("div",{class:"aioseo-description",innerHTML:i.shortDescription},null,8,Ee),p("div",{class:"aioseo-description",innerHTML:i.longDescription},null,8,Ie),i.infoComponent?(n(),b(O(i.infoComponent),{key:2})):D("",!0)]),_:2},1032,["name"]))),128)),g(x,{show:e.showAreYouSureModal,"no-header":"",onClose:o[6]||(o[6]=i=>e.showAreYouSureModal=!1),classes:["aioseo-debug-modal"]},{body:u(()=>[p("div",Ue,[p("button",{class:"close",onClick:o[3]||(o[3]=P(i=>e.showAreYouSureModal=!1,["stop"]))},[g(T,{onClick:o[2]||(o[2]=i=>e.showAreYouSureModal=!1)})]),p("h3",null,m(r.areYouSureTitle),1),p("div",{class:"description",innerHTML:e.strings.cannotBeUndone},null,8,$e),g(v,{type:"blue",size:"medium",onClick:o[4]||(o[4]=i=>r.doAction(e.currentData))},{default:u(()=>[w(m(e.strings.yesDoAction),1)]),_:1}),g(v,{type:"gray",size:"medium",onClick:o[5]||(o[5]=i=>e.showAreYouSureModal=!1)},{default:u(()=>[w(m(e.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"])])}const Ye=y(Oe,[["render",He]]),ze={components:{Debug:Ye}};function We(t,o,s,c,e,r){const d=a("debug",!0);return n(),b(d)}const Ke=y(ze,[["render",We]]),ho={__name:"Main",setup(t){const o=C(),s=$(),c=V(()=>{switch(s.name){case"bad-bot-blocker":return W;case"database-tools":return G;case"debug":return Ke;case"htaccess-editor":return se;case"import-export":return ne;case"system-status":return re;case"wp-code":return ae;default:return ie}});le();const e=void 0,r=V(()=>s.name!=="system-status"&&s.name!=="import-export"&&s.name!=="database-tools"&&s.name!=="debug"&&s.name!=="wp-code"),d={pageName:o.aioseo.data.isNetworkAdmin?A("Network Tools",e):A("Tools",e)};return(_,h)=>(n(),b(L(K),{"page-name":d.pageName,"show-save-button":r.value},{default:u(()=>[(n(),b(O(c.value)))]),_:1},8,["page-name","show-save-button"]))}};export{ho as default};
