import{i as j,Z as H,k as ke,l as se,u as _e,j as be,s as ge}from"./index.1916c442.js";import{v as x,o as d,c as $,G as u,g as N,f as L,y as He,k as S,l as c,a as y,t as g,u as e,H as P,b as F,J as B,m as re,K as q,T as ve,F as qe,N as ze,w as je,n as Ee,x as Se,q as Te}from"./runtime-dom.esm-bundler.d8cc9f6e.js";import{u as Ve}from"./vue-router.c752d027.js";import{_ as A}from"./_plugin-vue_export-helper.eefbdd86.js";import{C as Ce}from"./Card.5e470f9f.js";import{C as ae}from"./Tabs.59bea834.js";import{C as We}from"./SettingsRow.8bf4d07f.js";import{C as ne}from"./Tooltip.ec56da3f.js";import{G as Je,a as Qe}from"./Row.b818ec8c.js";import{a as Pe}from"./index.ea8ba50f.js";import{G as te}from"./Graph.1000e970.js";import"./translations.8804e7f4.js";import{_ as l,s as Y}from"./default-i18n.20001971.js";import{_ as Ye}from"./KeywordsGraph.ca16a32b.js";import{n as V}from"./numbers.9fc174f3.js";import{S as ie,a as Ze,c as Xe}from"./Statistic.dedd4ba7.js";import{u as le}from"./WpTable.2bfe12a8.js";import{C as ce}from"./Table.af46d4a1.js";import{C as Ke}from"./Index.daad859b.js";import{u as et}from"./PostTypes.8f22f5d2.js";import{a as $e,b as E}from"./Caret.f0cd5451.js";import{S as xe}from"./External.55b17655.js";import{S as tt}from"./SeoStatisticsOverview.3f942dda.js";import{r as de}from"./params.af7ed354.js";import{G as he}from"./constants.e65116f2.js";import{S as ye}from"./Star.29546e40.js";import{C as ot}from"./Blur.400f058f.js";import{R as st}from"./RequiredPlans.67e702d8.js";import{u as rt}from"./Cta.9c11c5ad.js";import{u as at}from"./License.2a7aa322.js";import"./helpers.86fc376f.js";import"./Slide.f54bc05f.js";import"./ProBadge.2a112d33.js";import"./Information.7ecdbebc.js";import"./vue3-apexcharts.6f6042eb.js";import"./_baseClone.a197b328.js";import"./_arrayEach.6af5abac.js";import"./_getTag.575e77df.js";import"./datetime.f197aeae.js";import"./ScrollTo.81bea8a7.js";import"./Download.c15a249a.js";import"./addons.b6e57b98.js";import"./upperFirst.6d3e3475.js";import"./_stringToArray.f9ddb970.js";import"./toString.a4cd37ed.js";import"./license.902e841d.js";const nt={name:"AddKeywords"};function it(t,r,o,n,s,a){return null}const lt=A(nt,[["render",it]]),ct={name:"AssignGroups"};function dt(t,r,o,n,s,a){return null}const ut=A(ct,[["render",dt]]),pt={name:"CreateGroup"};function mt(t,r,o,n,s,a){return null}const gt=A(pt,[["render",mt]]),ht={name:"DeleteGroups"};function yt(t,r,o,n,s,a){return null}const ft=A(ht,[["render",yt]]),wt={name:"DeleteKeywords"};function kt(t,r,o,n,s,a){return null}const _t=A(wt,[["render",kt]]),Q=void 0,bt={setup(){return{searchStatisticsStore:j()}},components:{Graph:te},computed:{series(){var r,o;if(!((o=(r=this.searchStatisticsStore.data)==null?void 0:r.keywords)!=null&&o.distribution))return[];const t=this.searchStatisticsStore.data.keywords.distribution;return[{name:l("Keywords",Q),data:[{x:l("Top 3 Position",Q),y:t.top3,fillColor:"#005AE0"},{x:l("4-10 Position",Q),y:t.top10,fillColor:"#00AA63"},{x:l("11-50 Position",Q),y:t.top50,fillColor:"#F18200"},{x:l("50-100 Position",Q),y:t.top100,fillColor:"#DF2A4A"}]}]}}},vt={class:"aioseo-search-statistics-keywords-distribution-graph"};function St(t,r,o,n,s,a){const i=x("graph");return d(),$("div",vt,[u(i,{series:a.series,loading:n.searchStatisticsStore.loading.keywords,preset:"keywordsDistribution"},null,8,["series","loading"])])}const Tt=A(bt,[["render",St]]),Ct={class:"post-title"},Pt={key:0,class:"row-actions"},Kt={class:"edit"},$t=["href"],xt=["href"],fe="search-statistics-keywords-inner-table",Rt={__name:"KeywordInner",props:{paginatedRows:Object},setup(t){const o=j(),n=t,s=N(5),a=N(null),{editPost:i,viewPost:w}=et(),{offset:h,processChangeItemsPerPage:C,processPagination:k,wpTableKey:m,wpTableLoading:K}=le({fetchData(){return D({keywords:[n.paginatedRows.keyword],limit:s.value,offset:h.value}).catch(G=>{console.error(G)})},tableId:fe,tableRef:a.value,resultsPerPage:s}),M=L(()=>n.paginatedRows.totals||{page:1,pages:0,total:0}),f=L(()=>M.value.page),R=L(()=>[{slug:"post_title",label:l("Title",void 0),width:"100%"},{slug:"clicks",label:l("Clicks",void 0),width:"120px"},{slug:"ctr",label:l("Avg. CTR",void 0),width:"120px"},{slug:"impressions",label:l("Impressions",void 0),width:"120px"},{slug:"position",label:l("Position",void 0),width:"120px"}]),D=G=>o.getPagesByKeywords(G).catch(()=>o.getPagesByKeywords(G)).catch(()=>o.getPagesByKeywords(G)).then(I=>{n.paginatedRows.pages=Object.values((I==null?void 0:I.rows)||{}),n.paginatedRows.totals=(I==null?void 0:I.totals)||{}});return He(()=>{const G=n.paginatedRows.keyword;K.value=!0,D({keywords:[G],limit:s.value,offset:h.value}).catch(I=>{console.error(I)}).finally(()=>{K.value=!1})}),(G,I)=>(d(),S(e(ce),{ref_key:"table",ref:a,id:fe,"additional-filters":[],columns:R.value,filters:[],"initial-items-per-page":s.value,"initial-page-number":f.value,"initial-search-term":"",key:e(m),loading:e(K),rows:t.paginatedRows.pages||[],"show-bulk-actions":!1,"show-header":!1,"show-table-footer":!0,totals:M.value,"show-items-per-page":!0,onPaginate:e(k),"show-search":!1,"show-pagination":!0,onProcessChangeItemsPerPage:e(C)},{post_title:c(({row:b})=>[y("div",Ct,[y("b",null,g(b.objectTitle),1)]),b!=null&&b.objectId?(d(),$("div",Pt,[y("span",Kt,[y("a",{href:b.context.permalink,target:"_blank"},g(e(w)(b.context.postType.singular)),9,$t),P(" | "),y("a",{href:b.context.editLink,target:"_blank"},g(e(i)(b.context.postType.singular)),9,xt)])])):F("",!0)]),clicks:c(({row:b})=>[P(g(e(V).compactNumber(b.clicks)),1)]),ctr:c(({row:b})=>[P(g(parseFloat(b.ctr))+"% ",1)]),impressions:c(({row:b})=>[P(g(e(V).compactNumber(b.impressions)),1)]),position:c(({row:b})=>[b.difference.comparison?(d(),S(e(ie),{key:0,type:"position",total:b.position,difference:b.difference.position,"tooltip-offset":"-150px,0"},null,8,["total","difference"])):F("",!0)]),_:1},8,["columns","initial-items-per-page","initial-page-number","loading","rows","totals","onPaginate","onProcessChangeItemsPerPage"]))}},Gt=A(Rt,[["__scopeId","data-v-2f00e628"]]),U=void 0,Ft={setup(t){const r="aioseo-search-statistics-keywords-table",o=L(()=>t.postDetail?"searchStatisticsPostDetailKeywords":"searchStatisticsKeywordRankings"),n=b=>`https://www.google.com/search?q=${encodeURIComponent(b)}`,s=N(!1),a=j(),i=b=>(s.value=!0,t.page!==""&&(b={...b,page:t.page}),t.postDetail?a.updatePostDetailKeywords(b).finally(()=>{s.value=!1}):a.updateKeywords(b).finally(()=>{s.value=!1})),w=N(!1),{orderBy:h,orderDir:C,processFilter:k}=Ze({processFilterTable:b=>f(b),showUpsell:w}),{filter:m,processAdditionalFilters:K,processChangeItemsPerPage:M,processFilterTable:f,processPagination:R,processSearch:D,processSort:G,searchTerm:I}=le({changeItemsPerPageSlug:o.value,fetchData:i,orderBy:h,orderDir:C,tableId:r});return{changeItemsPerPageSlug:o,filter:m,keywordRankTrackerStore:H(),licenseStore:ke(),links:se,orderBy:h,orderDir:C,processAdditionalFilters:K,processChangeItemsPerPage:M,processFilter:k,processPagination:R,processSearch:D,processSort:G,rootStore:_e(),searchStatisticsStore:a,searchTerm:I,settingsStore:be(),showUpsell:w,tableId:r,viewInGoogleLink:n}},components:{CoreTooltip:ne,CoreWpTable:ce,Cta:Ke,KeywordInner:Gt,Statistic:ie,SvgCaret:$e,SvgExternal:xe},props:{keywords:Object,loading:{type:Boolean,default(){return!1}},showHeader:{type:Boolean,default(){return!0}},showTableFooter:Boolean,showItemsPerPage:Boolean,columns:{type:Array,default(){return["keyword","clicks","ctr","impressions","position","diffPosition","buttons"]}},appendColumns:{type:Object,default(){return{}}},postDetail:{type:Boolean,default(){return!1}},refreshOnLoad:{type:Boolean,default(){return!0}},page:{type:String,default(){return""}},initialFilter:String},data(){return{numbers:V,activeRow:-1,interval:null,sortableColumns:[],strings:{addKeyword:l("Add to KRT",U),removeFromKrt:l("Remove from KRT",U),viewInGoogle:l("View in Google",U),position:l("Position",U),ctaButtonText:l("Unlock Keyword Tracking",U),ctaHeader:Y(l("Keyword Tracking is a %1$s Feature",U),"PRO")}}},computed:{getFilters(){return this.searchStatisticsStore.shouldShowSampleReports?[]:this.keywords.filters},allColumns(){var o,n;const t=Xe(this.columns),r=((n=(o=this.keywords)==null?void 0:o.filters)==null?void 0:n.find(s=>s.active))||{};return this.appendColumns[r.slug||"all"]&&t.push(this.appendColumns[r.slug||"all"]),t.map(s=>(s.endsWith("Sortable")&&(s=s.replace("Sortable",""),this.sortableColumns.push(s)),s))},tableColumns(){return[{slug:"keyword",label:l("Keyword",U)},{slug:"clicks",label:l("Clicks",U),width:"80px"},{slug:"ctr",label:l("Avg. CTR",U),width:"100px"},{slug:"impressions",label:l("Impressions",U),width:"120px"},{slug:"position",label:l("Position",U),width:"85px"},{slug:"diffDecay",label:l("Diff",U),width:"95px"},{slug:"diffPosition",label:l("Diff",U),width:"80px"},{slug:"buttons",label:"",width:this.hasSlot("buttons")?"240px":"40px"}].filter(t=>this.allColumns.includes(t.slug)).map(t=>(t.sortable=this.isSortable&&this.sortableColumns.includes(t.slug),t.sortable&&(t.sortDir=t.slug===this.orderBy?this.orderDir:"asc",t.sorted=t.slug===this.orderBy),t)).filter(t=>!this.searchStatisticsStore.shouldShowSampleReports||t.slug!=="buttons")},isSortable(){return this.filter==="all"&&this.rootStore.isPro&&!this.licenseStore.isUnlicensed}},methods:{isTrackingKeyword(t){return this.keywordRankTrackerStore.keywords.all.rows.find(r=>r.name===t.keyword)},sanitizeString:ge,isRowActive(t){return t===this.activeRow},toggleRow(t){if(this.activeRow===t){this.activeRow=-1;return}this.activeRow=t},hasSlot(t="default"){return!!this.$slots[t]},shouldLimitText(t){return 120<ge(t).length},maybeTrackKeyword(t){this.keywordRankTrackerStore.parentActiveTab="rank-tracker",this.keywordRankTrackerStore.toggleModal({modal:"modalOpenAddKeywords",open:!0,relatedKeywords:[t.keyword]})},maybeUntrackKeyword(t){this.keywordRankTrackerStore.parentActiveTab="rank-tracker",this.keywordRankTrackerStore.toggleModal({modal:"modalOpenDeleteKeywords",open:!0,keywords:[this.keywordRankTrackerStore.keywords.all.rows.find(r=>r.name===t.keyword)]})}},async mounted(){var t,r;this.initialFilter&&this.processFilter({slug:this.initialFilter}),this.orderBy=((t=this.defaultSorting)==null?void 0:t.orderBy)||this.orderBy,this.orderDir=((r=this.defaultSorting)==null?void 0:r.orderDir)||this.orderDir}},At={class:"aioseo-search-statistics-keywords-table"},Dt={class:"post-title"},It=["onClick"],Ot=["onClick"],Bt={class:"row-actions"},Ut={class:"edit"},Lt=["href"],Mt=["onClick"],Nt={key:0,class:"delete"},Ht=["onClick"],qt={class:""};function zt(t,r,o,n,s,a){const i=x("core-tooltip"),w=x("svg-external"),h=x("statistic"),C=x("svg-caret"),k=x("base-button"),m=x("keyword-inner"),K=x("cta"),M=x("core-wp-table");return d(),$("div",At,[u(M,{ref:"table",class:"keywords-table",id:n.tableId,columns:a.tableColumns,rows:Object.values(o.keywords.rows),totals:o.keywords.totals,filters:a.getFilters,"additional-filters":o.keywords.additionalFilters,loading:o.loading,"initial-page-number":o.keywords.totals.page||1,"initial-search-term":n.searchTerm,"initial-items-per-page":n.settingsStore.settings.tablePagination[n.changeItemsPerPageSlug],"show-header":o.showHeader,"show-bulk-actions":!1,"show-table-footer":o.showTableFooter,"show-items-per-page":o.showItemsPerPage&&!n.searchStatisticsStore.shouldShowSampleReports,"show-pagination":"","blur-rows":n.showUpsell,onFilterTable:n.processFilter,onProcessAdditionalFilters:n.processAdditionalFilters,onPaginate:n.processPagination,onProcessChangeItemsPerPage:n.processChangeItemsPerPage,onSearch:n.processSearch,onSortColumn:n.processSort},{keyword:c(({row:f,index:R,editRow:D})=>[y("div",Dt,[a.shouldLimitText(f.keyword)?(d(),S(i,{key:0},{tooltip:c(()=>[P(g(a.sanitizeString(f.keyword)),1)]),default:c(()=>[y("a",{class:"limit-line",href:"#",onClick:B(G=>{D(R),a.toggleRow(R)},["prevent"])},g(a.sanitizeString(f.keyword)),9,It)]),_:2},1024)):(d(),$("a",{key:1,href:"#",onClick:B(G=>{D(R),a.toggleRow(R)},["prevent"])},g(a.sanitizeString(f.keyword)),9,Ot))]),y("div",Bt,[y("span",Ut,[y("a",{href:n.viewInGoogleLink(f.keyword),target:"_blank"},[P(g(s.strings.viewInGoogle)+" ",1),u(w)],8,Lt),P(" | "),a.isTrackingKeyword(f)?F("",!0):(d(),$("a",{key:0,href:"#",onClick:B(G=>a.maybeTrackKeyword(f),["prevent","exact"])},g(s.strings.addKeyword),9,Mt))]),a.isTrackingKeyword(f)?(d(),$("span",Nt,[y("a",{href:"#",onClick:B(G=>a.maybeUntrackKeyword(f),["prevent","exact"])},g(s.strings.removeFromKrt),9,Ht)])):F("",!0)])]),clicks:c(({row:f})=>[P(g(f.clicks),1)]),ctr:c(({row:f})=>[P(g(parseFloat(f.ctr))+"% ",1)]),impressions:c(({row:f})=>[P(g(s.numbers.compactNumber(f.impressions)),1)]),position:c(({row:f})=>[P(g(Math.round(f.position).toFixed(0)),1)]),diffPosition:c(({row:f})=>[f.difference.comparison?(d(),S(h,{key:0,type:"position",difference:f.difference.position,showCurrent:!1,"tooltip-offset":"-100px,0"},null,8,["difference"])):F("",!0)]),diffDecay:c(({row:f})=>[f.difference.comparison?(d(),S(h,{key:0,type:"decay",difference:f.difference.decay,showCurrent:!1,"tooltip-offset":"-100px,0"},null,8,["difference"])):F("",!0)]),buttons:c(({row:f,index:R,column:D,editRow:G})=>[y("div",qt,[re(t.$slots,"buttons",{row:f,column:D,index:R}),u(k,{type:"gray",class:q(["toggle-row-button",{active:a.isRowActive(R)}]),onClick:I=>{G(R),a.toggleRow(R)}},{default:c(()=>[u(C)]),_:2},1032,["class","onClick"])])]),"edit-row":c(({index:f})=>[u(m,{"paginated-rows":o.keywords.rows[f]},null,8,["paginated-rows"])]),cta:c(()=>[n.showUpsell?(d(),S(K,{key:0,"cta-link":n.links.getPricingUrl("search-statistics","search-statistics-upsell"),"button-text":s.strings.ctaButtonText,"learn-more-link":n.links.getUpsellUrl("search-statistics","search-statistics-upsell",n.rootStore.isPro?"pricing":"liteUpgrade"),"hide-bonus":!n.licenseStore.isUnlicensed},{"header-text":c(()=>[P(g(s.strings.ctaHeader),1)]),_:1},8,["cta-link","button-text","learn-more-link","hide-bonus"])):F("",!0)]),tablenav:c(()=>[re(t.$slots,"tablenav")]),_:3},8,["id","columns","rows","totals","filters","additional-filters","loading","initial-page-number","initial-search-term","initial-items-per-page","show-header","show-table-footer","show-items-per-page","blur-rows","onFilterTable","onProcessAdditionalFilters","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])])}const jt=A(Ft,[["render",zt]]),ee=void 0,Et={setup(){return{searchStatisticsStore:j()}},components:{CoreSettingsRow:We,CoreTooltip:ne,GridColumn:Je,GridRow:Qe,KeywordsDistributionGraph:Tt,KeywordsGraph:Ye,KeywordsTable:jt,SeoStatisticsOverview:tt,SvgCircleQuestionMark:Pe},data(){return{initialTableFilter:"",strings:{keywordPositionsCard:l("Keyword Positions",ee),keywordPositionsTooltip:l("This graph is a visual representation of how well <strong>keywords are ranking in search results over time</strong> based on their position and average CTR. This can help you understand the performance of keywords and identify any trends or fluctuations.",ee),keywordPerformanceCard:l("Keyword Performance",ee),keywordPerformanceTooltip:l("This table displays the performance of keywords that your site ranks for over time, including metrics such as impressions, click-through rate, and average position in search results. It allows for easy analysis of how keywords are performing and identification of any underperforming keywords that may need to be optimized or replaced.",ee)},defaultKeywords:{rows:[],totals:{page:0,pages:0,total:0}}}},beforeMount(){var o,n,s;const t={TopLosingKeywords:"topLosing",TopWinningKeywords:"topWinning"},r=new URLSearchParams(((o=window.location)==null?void 0:o.search)||"")||{};if(r.has("table-filter")||(s=(n=this.$route)==null?void 0:n.query)!=null&&s["table-filter"]){const a=r.get("table-filter")||this.$route.query["table-filter"]||"all";this.initialTableFilter=t[a],this.$route.query["table-filter"]=void 0,de("table-filter")}},mounted(){this.searchStatisticsStore.isConnected&&this.searchStatisticsStore.loadInitialData()}},Vt={class:"aioseo-search-statistics-keywords"},Wt=["innerHTML"],Jt=["innerHTML"];function Qt(t,r,o,n,s,a){const i=x("svg-circle-question-mark"),w=x("core-tooltip"),h=x("seo-statistics-overview"),C=x("keywords-graph"),k=x("grid-column"),m=x("keywords-distribution-graph"),K=x("grid-row"),M=x("core-settings-row"),f=x("keywords-table");return d(),$("div",Vt,[u(M,{name:s.strings.chooseYourKeywords,"left-size":"12","right-size":"12",class:"aioseo-settings-row--positions"},{name:c(()=>[P(g(s.strings.keywordPositionsCard)+" ",1),u(w,null,{tooltip:c(()=>[y("span",{innerHTML:s.strings.keywordPositionsTooltip},null,8,Wt)]),default:c(()=>[u(i)]),_:1})]),content:c(()=>[u(h,{statistics:["keywords","impressions","position"],"show-graph":!1,view:"side-by-side"}),u(K,null,{default:c(()=>[u(k,{md:"6"},{default:c(()=>[u(C,{"legend-style":"simple"})]),_:1}),u(k,{md:"6"},{default:c(()=>[u(m)]),_:1})]),_:1})]),_:1},8,["name"]),u(M,{name:s.strings.keywordPerformanceCard,"left-size":"12","right-size":"12","no-vertical-margin":"","no-border":"",class:"aioseo-settings-row--performance"},{name:c(()=>[P(g(s.strings.keywordPerformanceCard)+" ",1),u(w,null,{tooltip:c(()=>[y("span",{innerHTML:s.strings.keywordPerformanceTooltip},null,8,Jt)]),default:c(()=>[u(i)]),_:1})]),content:c(()=>{var R,D;return[u(f,{keywords:((D=(R=n.searchStatisticsStore.data)==null?void 0:R.keywords)==null?void 0:D.paginated)||s.defaultKeywords,loading:n.searchStatisticsStore.loading.keywords,columns:["keywordSortable","clicksSortable","ctrSortable","impressionsSortable","positionSortable","buttons"],"append-columns":{all:"diffPosition",topLosing:"diffDecay",topWinning:"diffDecay"},initialFilter:s.initialTableFilter,"show-items-per-page":"","show-table-footer":""},null,8,["keywords","loading","initialFilter"])]}),_:1},8,["name"])])}const Yt=A(Et,[["render",Qt]]),Zt={name:"EmptyState"};function Xt(t,r,o,n,s,a){return null}const eo=A(Zt,[["render",Xt]]),to={name:"Groups"};function oo(t,r,o,n,s,a){return null}const so=A(to,[["render",oo]]),ro={class:"keyword-rank-tracker-tabs"},Re={__name:"Tabs",props:{activeTab:{type:String,default:"keywords"}},emits:["update:activeTab"],setup(t,{emit:r}){const n=H(),s=r,a={addKeywords:l("Add Keywords",void 0),createGroup:l("Create Group",void 0)},i=[{slug:"keywords",name:l("Keywords",void 0)},{slug:"groups",name:l("Groups",void 0)}];return(w,h)=>{const C=x("base-button");return d(),$("div",ro,[u(e(ae),{tabs:i,active:t.activeTab,onChanged:h[2]||(h[2]=k=>{s("update:activeTab",k)})},{button:c(()=>[t.activeTab==="keywords"?(d(),S(C,{key:0,class:"btn-add-keywords",size:"small-table",type:"blue",onClick:h[0]||(h[0]=B(k=>e(n).toggleModal({modal:"modalOpenAddKeywords",open:!0}),["exact"]))},{default:c(()=>[P(g(a.addKeywords),1)]),_:1})):F("",!0),t.activeTab==="groups"?(d(),S(C,{key:1,class:"btn-create-group",size:"small-table",type:"blue",onClick:h[1]||(h[1]=B(k=>e(n).toggleModal({modal:"modalOpenCreateGroup",open:!0}),["exact"]))},{default:c(()=>[P(g(a.createGroup),1)]),_:1})):F("",!0)]),_:1},8,["active"]),u(ve,{name:"route-fade",mode:"out-in"},{default:c(()=>[re(w.$slots,"tab-content")]),_:3})])}}},ao={class:"keyword-rank-tracker-graphs"},no={__name:"KeywordsGraphs",setup(t){const o=H(),n=L(()=>o.isFetchingStatistics.keywords),s=L(()=>{var h,C;const i=(h=o.keywords.statistics)==null?void 0:h.distribution,w=(C=o.keywords.statistics)==null?void 0:C.distributionIntervals;return!i||!w?[]:[{name:l("Top 3 Position",void 0),data:w.map(k=>({x:k.date,y:k.top3}))},{name:l("4-10 Position",void 0),data:w.map(k=>({x:k.date,y:k.top10}))},{name:l("11-50 Position",void 0),data:w.map(k=>({x:k.date,y:k.top50}))},{name:l("50-100 Position",void 0),data:w.map(k=>({x:k.date,y:k.top100}))}]}),a=L(()=>{var w;const i=(w=o.keywords.statistics)==null?void 0:w.distribution;return i?[{name:l("Keywords",void 0),data:[{x:l("Top 3 Position",void 0),y:i.top3,fillColor:"#005AE0"},{x:l("4-10 Position",void 0),y:i.top10,fillColor:"#00AA63"},{x:l("11-50 Position",void 0),y:i.top50,fillColor:"#F18200"},{x:l("50-100 Position",void 0),y:i.top100,fillColor:"#DF2A4A"}]}]:[]});return(i,w)=>(d(),$("div",ao,[u(e(te),{series:s.value,loading:n.value,"legend-style":"simple"},null,8,["series","loading"]),u(e(te),{series:a.value,loading:n.value,preset:"keywordsDistribution"},null,8,["series","loading"])]))}},io=A(no,[["__scopeId","data-v-f5d86067"]]),lo={class:"keyword-rank-tracker-summary"},co={class:"keyword-rank-tracker-summary__vision__header"},uo=["innerHTML"],po={__name:"KeywordsSummary",setup(t){const o=H(),n=[{name:"keywords",label:"Total Keywords",tooltip:Y(l("The %1$stotal number of keywords that are being tracked%2$s for your website.",void 0),"<strong>","</strong>")},{name:"impressions",label:"Search Impressions",tooltip:Y(l("The %1$stotal number of impressions your tracked keywords have aggregated in search results%2$s within the selected timeframe.",void 0),"<strong>","</strong>")},{name:"clicks",label:"Clicks",tooltip:Y(l("The %1$stotal number of clicks your tracked keywords have aggregated from search results%2$s within the selected timeframe.",void 0),"<strong>","</strong>")},{name:"ctr",label:"Avg. CTR",tooltip:Y(l("The %1$saverage click-through rate of your tracked keywords in search results%2$s within the selected timeframe.",void 0),"<strong>","</strong>")}],s=L(()=>o.isFetchingStatistics.keywords),a=L(()=>{const i=o.keywords.all.rows.filter(m=>m.statistics),w=i.length?V.compactNumber(i.map(m=>m.statistics.clicks).reduce((m,K)=>m+K,0)):0,h=i.length?V.compactNumber(i.map(m=>m.statistics.impressions).reduce((m,K)=>m+K,0)):0,C=i.length?(i.map(m=>Number(m.statistics.position)).reduce((m,K)=>m+K,0)/i.length).toFixed(0):0,k=i.length?(i.map(m=>Number(m.statistics.ctr)).reduce((m,K)=>m+K,0)/i.length).toFixed(2)+"%":0;return{keywords:o.keywords.all.rows.length,clicks:w,impressions:h,position:C,ctr:k}});return(i,w)=>(d(),$("div",lo,[(d(),$(qe,null,ze(n,(h,C)=>{var k,m;return y("div",{key:C,class:"keyword-rank-tracker-summary__vision"},[y("div",co,[P(g(h.label)+" ",1),h.tooltip?(d(),S(e(ne),{key:0},{tooltip:c(()=>[y("span",{innerHTML:h.tooltip},null,8,uo)]),default:c(()=>[u(e(Pe))]),_:2},1024)):F("",!0)]),s.value&&h.name!=="keywords"?(d(),S(e(E),{key:0,dark:""})):F("",!0),y("div",{class:q(["keyword-rank-tracker-summary__vision__body",{"keyword-rank-tracker-summary__vision__body--invisible":s.value&&h.name!=="keywords"}])},[P(g(a.value[h.name])+" ",1),(m=(k=e(o).keywords.statistics)==null?void 0:k.difference)!=null&&m[h.name]?(d(),S(e(ie),{key:0,"show-current":!1,type:h.name,difference:Number(e(o).keywords.statistics.difference[h.name])},null,8,["type","difference"])):F("",!0)],2)])}),64))]))}},mo=A(po,[["__scopeId","data-v-c90704ec"]]),go={name:"KeywordRankingPagesTable"};function ho(t,r,o,n,s,a){return null}const yo=A(go,[["render",ho]]),fo={name:"RelatedKeywordsTable"};function wo(t,r,o,n,s,a){return null}const ko=A(fo,[["render",wo]]),_o=["disabled"],bo={class:"btn-favorite"},vo={class:"post-title"},So=["onClick"],To={class:"row-actions"},Co={class:"edit"},Po=["href"],Ko=["onClick"],$o=["onClick"],xo={key:0},Ro=["onClick"],Go={class:"delete"},Fo=["onClick"],Ao={class:"inner-tabs"},Do=["onClick"],Io=y("span",null,"|",-1),Oo=["onClick"],Bo={key:1},Uo={key:1},Lo={key:1},Mo={key:1},No={key:1},we="keyword-rank-tracker-keywords-table",Ho={__name:"KeywordsTable",props:{canEditRow:{type:Boolean,default:!0},paginatedKeywords:Object,showAdditionalFilters:{type:Boolean,default:!0},showTableFooter:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},fetchData:{type:Function,default(t){return H().fetchKeywords(t)}},outerGroup:Object,loading:Boolean,changeItemsPerPageSlug:{type:String,default:"searchStatisticsKrtKeywords"}},setup(t){const o=H(),n=be(),s={addToGroup:l("Add to Group",void 0),editGroup:l("Edit Group(s)",void 0),removeFromGroup:l("Remove from Group",void 0),position:l("Position",void 0),viewInGoogle:l("View in Google",void 0),relatedKeywords:l("Related Keywords",void 0),keywordRankingPages:l("Keyword Ranking Pages",void 0)},a=[{label:he.delete,value:"delete"},{label:s.addToGroup,value:"assignGroup"}],i=t,w=N(null),h=N([]),C=N("related-keywords-table"),k=N(!1),{orderBy:m,orderDir:K,processAdditionalFilters:M,processChangeItemsPerPage:f,processFilterTable:R,processPagination:D,processSearch:G,processSort:I,searchTerm:b,wpTableKey:Fe,wpTableLoading:W}=le({changeItemsPerPageSlug:i.changeItemsPerPageSlug,fetchData:i.fetchData,tableId:we,tableRef:w.value}),Ae=L(()=>i.paginatedKeywords.totals.page),De=L(()=>{if(!i.showAdditionalFilters||!o.groups.count)return[];const v=[{label:l("All Groups",void 0),value:"all"},...o.groups.all.rows.map(T=>({...T,label:o.favoriteGroup.label===T.label?"&starf;":T.label}))];return[{label:l("Filter by Group",void 0),name:"group",options:v}]}),Ie=L(()=>[{slug:"all",name:"All",active:i.paginatedKeywords.filter==="all"},{slug:"favorited",name:"Favorited",active:i.paginatedKeywords.filter==="favorited"}]),Oe=L(()=>{const v=[{slug:"favorited",label:"",width:"50px"},{slug:"name",label:l("Keyword",void 0),sortable:1<i.paginatedKeywords.totals.total,sortDir:m.value==="name"?K.value:"asc",sorted:m.value==="name"},{slug:"clicks",label:l("Clicks",void 0),sortable:1<i.paginatedKeywords.totals.total,sortDir:m.value==="clicks"?K.value:"asc",sorted:m.value==="clicks",width:"100px"},{slug:"ctr",label:l("Avg. CTR",void 0),sortable:1<i.paginatedKeywords.totals.total,sortDir:m.value==="ctr"?K.value:"asc",sorted:m.value==="ctr",width:"100px"},{slug:"impressions",label:l("Impressions",void 0),sortable:1<i.paginatedKeywords.totals.total,sortDir:m.value==="impressions"?K.value:"asc",sorted:m.value==="impressions",width:"110px"},{slug:"position",label:l("Position",void 0),sortable:1<i.paginatedKeywords.totals.total,sortDir:m.value==="position"?K.value:"asc",sorted:m.value==="position",width:"100px"},{slug:"history",label:l("Position History",void 0),width:"140px"}];return i.canEditRow&&v.push({slug:"buttons",label:"",width:"60px"}),v});je(()=>[o.keywords.count,o.range],()=>{o.keywords.count&&(w.value.activeRow=null)});const Z=(v,T)=>{var J;let _=((J=v.statistics)==null?void 0:J[T])??"";switch(T){case"ctr":_=_!==""?parseFloat(_)+"%":_;break;case"clicks":case"impressions":_=_!==""?V.compactNumber(_):_;break;case"position":_=_!==""?Math.round(_).toFixed(0):_;break}return _},Be=({action:v,selectedRows:T})=>{T.length&&(T=i.paginatedKeywords.rows.filter(_=>T.includes(String(_.id))),v==="delete"&&o.toggleModal({modal:"modalOpenDeleteKeywords",open:!0,keywords:T,fetchKeywordsCallback:i.fetchData}),v==="assignGroup"&&o.toggleModal({modal:"modalOpenAssignGroups",open:!0,keywords:T.map(_=>({..._,groups:[]})),fetchKeywordsCallback:i.fetchData}))},ue=v=>{var T;return(T=v.statistics)!=null&&T.history?[{name:s.position,data:v.statistics.history.map(_=>({x:_.date,y:_.position}))}]:[]},Ue=async(v,T)=>{h.value[T]=!0;try{await o.updateKeyword({id:v.id,payload:{favorited:!v.favorited}}),await i.fetchData(),await o.fetchGroups(),o.maybeFetchStatistics({context:"groups"})}catch(_){console.error(_)}finally{h.value=[]}},Le=v=>`https://www.google.com/search?q=${encodeURIComponent(v)}`,oe=async(v,T)=>{o.resetRelatedKeywords(),o.resetKeywordsRankingPages(),k.value=!0,C.value=v;try{v==="keyword-ranking-pages-table"&&await o.fetchKeywordsRankingPages({keywords:[T.name]}),v==="related-keywords-table"&&(await o.fetchRelatedKeywords(T.name),o.maybeFetchRelatedKeywordsStatistics())}catch(_){console.error(_)}finally{k.value=!1}},Me=v=>{o.toggleModal({modal:"modalOpenDeleteKeywords",open:!0,keywords:[v],fetchKeywordsCallback:i.fetchData})},pe=async(v,T,_)=>{_(v),await Ee(),w.value.activeRow!==null&&await oe("related-keywords-table",T)},Ne=async(v,T)=>{try{W.value=!0,await o.updateRelationships({keywords:[v],groups:v.groups.filter(_=>_.id!==T.id)}),await o.fetchGroups().then(()=>{o.maybeFetchStatistics({context:"groups"}),i.fetchData({updateKeywords:!0})})}catch(_){console.error(_)}finally{W.value=!1}};return(v,T)=>{var J;const _=x("base-button");return d(),S(e(ce),{ref_key:"table",ref:w,id:we,"additional-filters":De.value,"bulk-options":a,columns:Oe.value,filters:Ie.value,"initial-items-per-page":e(n).settings.tablePagination[t.changeItemsPerPageSlug],"initial-page-number":Ae.value,"initial-search-term":((J=t.paginatedKeywords)==null?void 0:J.searchTerm)||e(b),key:e(Fe),loading:e(W)||t.loading,rows:t.paginatedKeywords.rows,"show-bulk-actions":"","show-header":t.showHeader,"show-table-footer":t.showTableFooter,totals:t.paginatedKeywords.totals,"show-items-per-page":"",onFilterTable:e(R),onPaginate:e(D),onProcessAdditionalFilters:T[0]||(T[0]=p=>e(M)({filters:p.filters,term:p.searchTerm,number:p.pageNumber})),onProcessBulkAction:Be,onProcessChangeItemsPerPage:e(f),onSearch:e(G),onSortColumn:e(I)},{filters:c(({slug:p,active:O})=>[y("button",{type:"button",class:q([`btn-filter-favorited button ${p}`,{"btn-filter-favorited--not-active":!O}]),disabled:e(W)||t.loading,tabindex:"-1"},[u(e(ye),{active:!0})],10,_o)]),favorited:c(({row:p,index:O})=>[y("div",bo,[u(_,{class:q(["btn-favorite__button",{"btn-favorite__button--active":p.favorited}]),loading:h.value[O],onClick:B(X=>Ue(p,O),["exact"])},{default:c(()=>[u(e(ye),{width:"20",active:p.favorited},null,8,["active"])]),_:2},1032,["class","loading","onClick"])])]),name:c(({row:p,index:O,editRow:X})=>[y("div",vo,[y("a",{href:"#",onClick:B(z=>pe(O,p,X),["prevent","exact"])},g(p.name),9,So)]),y("div",To,[y("span",Co,[y("a",{href:Le(p.name),target:"_blank"},[P(g(s.viewInGoogle)+" ",1),u(e(xe))],8,Po),P(" | "),y("span",null,[p.groups.length?(d(),$("a",{key:0,href:"#",onClick:B(z=>e(o).toggleModal({modal:"modalOpenAssignGroups",open:!0,keywords:[p],fetchKeywordsCallback:t.fetchData}),["prevent","exact"])},g(s.editGroup),9,Ko)):(d(),$("a",{key:1,href:"#",onClick:B(z=>e(o).toggleModal({modal:"modalOpenAssignGroups",open:!0,keywords:[p],fetchKeywordsCallback:t.fetchData}),["prevent","exact"])},g(s.addToGroup),9,$o)),P(" | ")]),p.groups.length&&t.outerGroup?(d(),$("span",xo,[y("a",{href:"#",onClick:B(z=>Ne(p,t.outerGroup),["prevent","exact"])},g(s.removeFromGroup),9,Ro),P(" | ")])):F("",!0)]),y("span",Go,[y("a",{href:"#",onClick:B(z=>Me(p),["prevent","exact"])},g(e(he).delete),9,Fo)])])]),"edit-row":c(({row:p})=>[y("div",Ao,[y("a",{href:"#",class:q({active:C.value==="related-keywords-table"}),onClick:B(O=>oe("related-keywords-table",p),["prevent"])},g(s.relatedKeywords),11,Do),Io,y("a",{href:"#",class:q({active:C.value==="keyword-ranking-pages-table"}),onClick:B(O=>oe("keyword-ranking-pages-table",p),["prevent"])},g(s.keywordRankingPages),11,Oo)]),C.value==="related-keywords-table"?(d(),S(e(ko),{key:0,class:"inner-table","paginated-rows":e(o).keywords.related.paginated,loading:k.value},null,8,["paginated-rows","loading"])):F("",!0),C.value==="keyword-ranking-pages-table"?(d(),S(e(yo),{key:1,class:"inner-table","paginated-rows":e(o).keywords.rankingPages.paginated,loading:k.value},null,8,["paginated-rows","loading"])):F("",!0)]),clicks:c(({row:p})=>[p.statistics===null?(d(),S(e(E),{key:0,dark:""})):(d(),$("div",Bo,g(Z(p,"clicks")),1))]),ctr:c(({row:p})=>[p.statistics===null?(d(),S(e(E),{key:0,dark:""})):(d(),$("div",Uo,g(Z(p,"ctr")),1))]),impressions:c(({row:p})=>[p.statistics===null?(d(),S(e(E),{key:0,dark:""})):(d(),$("div",Lo,g(Z(p,"impressions")),1))]),position:c(({row:p})=>[p.statistics===null?(d(),S(e(E),{key:0,dark:""})):(d(),$("div",Mo,g(Z(p,"position")),1))]),history:c(({row:p})=>[p.statistics===null?(d(),S(e(E),{key:0,dark:""})):(d(),$("div",No,[ue(p).length?(d(),S(e(te),{key:0,series:ue(p),height:25,preset:"overview","chart-overrides":{tooltip:{y:{formatter:O=>parseFloat(O).toFixed(2)}}}},null,8,["series","chart-overrides"])):F("",!0)]))]),buttons:c(({row:p,index:O,editRow:X})=>{var z,me;return[u(_,{onClick:rs=>pe(O,p,X),type:((z=w.value)==null?void 0:z.activeRow)===O?"blue":"gray",disabled:e(W)||t.loading,class:q([{active:((me=w.value)==null?void 0:me.activeRow)===O},"btn-toggle-row"])},{default:c(()=>[u(e($e),{width:"18"})]),_:2},1032,["onClick","type","disabled","class"])]}),_:1},8,["additional-filters","columns","filters","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","show-header","show-table-footer","totals","onFilterTable","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])}}},qo={class:"keyword-rank-tracker-main"},zo={class:"aioseo-settings-row aioseo-settings-row--summary"},jo={class:"aioseo-settings-row aioseo-settings-row--graphs"},Eo={class:"settings-name"},Vo={class:"name"},Wo={__name:"Keywords",setup(t){const o=H(),n={topPositions:l("Top Positions",void 0)};return(s,a)=>(d(),$("div",qo,[y("div",zo,[u(e(mo))]),y("div",jo,[y("div",Eo,[y("div",Vo,g(n.topPositions),1)]),u(e(io))]),u(e(Ho),{"paginated-keywords":e(o).keywords.paginated},null,8,["paginated-keywords"])]))}},Ge=A(Wo,[["__scopeId","data-v-673b8029"]]),Jo={__name:"RankTracker",setup(t){const r=H(),o=j(),n=N("keywords");return Se(()=>{if(o.isConnected&&!o.shouldShowSampleReports&&!r.keywords.all.rows.length)try{const s=new URLSearchParams(document.location.search)||{};s!=null&&s.get("search")&&(r.keywords.paginated.searchTerm=s.get("search"),de("search")),r.maybeUpdateKeywords(),r.maybeUpdateGroups()}catch(s){console.error(s)}}),(s,a)=>(d(),$("div",null,[u(e(Re),{"active-tab":n.value,"onUpdate:activeTab":a[0]||(a[0]=i=>n.value=i)},{"tab-content":c(()=>[(d(),S(Te(e(r)[n.value].count?n.value==="keywords"?e(Ge):e(so):e(eo)),{context:n.value},null,8,["context"]))]),_:1},8,["active-tab"])]))}},Qo={name:"UpdateGroup"};function Yo(t,r,o,n,s,a){return null}const Zo=A(Qo,[["render",Yo]]),Xo={__name:"Index",setup(t){const r=H(),o=void 0,n=[{slug:"rank-tracker",name:l("Rank Tracker",o)},{slug:"all-keywords",name:l("All Keywords",o)}];return Se(()=>{var i,w;const s=new URLSearchParams(((i=window.location)==null?void 0:i.search)||"")||{},a=Ve();(s.has("tab")||(w=a==null?void 0:a.query)!=null&&w.tab)&&((s.get("tab")||a.query.tab)==="AllKeywords"&&(r.parentActiveTab="all-keywords"),a.query.tab=void 0,de("tab"))}),(s,a)=>(d(),S(e(Ce),{slug:"keywordRankTracker","hide-header":!0,toggles:!1,"no-slide":""},{tabs:c(()=>[u(e(ae),{tabs:n,active:e(r).parentActiveTab,"show-save-button":!1,onChanged:a[0]||(a[0]=i=>{e(r).parentActiveTab=i}),internal:""},null,8,["active"])]),default:c(()=>[u(ve,{name:"route-fade",mode:"out-in"},{default:c(()=>[(d(),S(Te(e(r).parentActiveTab==="rank-tracker"?e(Jo):e(Yt))))]),_:1}),u(e(_t),{"modal-open":e(r).modalOpenDeleteKeywords,"onUpdate:modalOpen":a[1]||(a[1]=i=>e(r).toggleModal({modal:"modalOpenDeleteKeywords",open:i}))},null,8,["modal-open"]),u(e(lt),{"modal-open":e(r).modalOpenAddKeywords,"onUpdate:modalOpen":a[2]||(a[2]=i=>e(r).toggleModal({modal:"modalOpenAddKeywords",open:i}))},null,8,["modal-open"]),u(e(ut),{"modal-open":e(r).modalOpenAssignGroups,"onUpdate:modalOpen":a[3]||(a[3]=i=>e(r).toggleModal({modal:"modalOpenAssignGroups",open:i}))},null,8,["modal-open"]),u(e(gt),{"modal-open":e(r).modalOpenCreateGroup,"onUpdate:modalOpen":a[4]||(a[4]=i=>e(r).toggleModal({modal:"modalOpenCreateGroup",open:i}))},null,8,["modal-open"]),u(e(Zo),{group:e(r).groups.selected[0],"modal-open":e(r).modalOpenUpdateGroup,"onUpdate:modalOpen":a[5]||(a[5]=i=>e(r).toggleModal({modal:"modalOpenUpdateGroup",open:i}))},null,8,["group","modal-open"]),u(e(ft),{"modal-open":e(r).modalOpenDeleteGroups,"onUpdate:modalOpen":a[6]||(a[6]=i=>e(r).modalOpenDeleteGroups=i)},null,8,["modal-open"])]),_:1}))}},es={__name:"Blur",setup(t){const o=[{slug:"rank-tracker",name:l("Rank Tracker",void 0)},{slug:"all-keywords",name:l("All Keywords",void 0)}];return(n,s)=>(d(),S(e(ot),null,{default:c(()=>[u(e(Ce),{slug:"keywordRankTracker","hide-header":!0,toggles:!1,"no-slide":""},{tabs:c(()=>[u(e(ae),{tabs:o,active:"rank-tracker","show-save-button":!1,onChanged:s[0]||(s[0]=a=>{n.activeTab=a}),internal:""})]),default:c(()=>[u(e(Re),{"active-tab":"keywords"},{"tab-content":c(()=>[u(e(Ge))]),_:1})]),_:1})]),_:1}))}},ts={class:"aioseo-search-statistics-keyword-rank-tracker"},os={__name:"Index",setup(t){const{strings:r}=rt(),o=ke(),n=_e(),s=j();return(a,i)=>(d(),$("div",ts,[e(s).shouldShowSampleReports?F("",!0):(d(),S(e(es),{key:0})),e(s).shouldShowSampleReports?F("",!0):(d(),S(e(Ke),{key:1,"cta-second-button-action":"",onCtaSecondButtonClick:e(s).showSampleReports,"cta-link":e(se).getPricingUrl("search-statistics","search-statistics-upsell","keyword-rank-tracker"),"button-text":e(r).ctaButtonText,"second-button-text":e(r).ctaSecondButtonText,"cta-second-button-new-badge":"","cta-second-button-visible":"","learn-more-link":e(se).getUpsellUrl("search-statistics","keyword-rank-tracker",e(n).isPro?"pricing":"liteUpgrade"),"feature-list":[e(r).feature1,e(r).feature2,e(r).feature3,e(r).feature4],"align-top":"","hide-bonus":!e(o).isUnlicensed},{"header-text":c(()=>[P(g(e(r).ctaHeader),1)]),description:c(()=>[u(e(st),{"core-feature":["search-statistics"]}),P(" "+g(e(r).ctaDescription),1)]),_:1},8,["onCtaSecondButtonClick","cta-link","button-text","second-button-text","learn-more-link","feature-list","hide-bonus"]))]))}},ss=A(os,[["__scopeId","data-v-9e791043"]]),Ys={__name:"KeywordRankTracker",setup(t){const r=j(),{shouldShowLite:o,shouldShowUpgrade:n}=at();return(s,a)=>(e(n)("search-statistics","keyword-rank-tracker")||e(o))&&!e(r).shouldShowSampleReports?(d(),S(e(ss),{key:0,class:"aioseo-search-statistics-keyword-rank-tracker"})):(d(),S(e(Xo),{key:1,class:q([{"aioseo-search-statistics-keyword-rank-tracker--disable-click":e(r).shouldShowSampleReports},"aioseo-search-statistics-keyword-rank-tracker"])},null,8,["class"]))}};export{Ys as default};
